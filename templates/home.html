<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}PrecisionGrow{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- Custom CSS with cache-busting -->
  <link href="{{ url_for('static', filename='css/styles.css') }}?v=2" rel="stylesheet">

  {% block head %}{% endblock %}
</head>
<!-- Inline body style to guarantee background while debugging CSS load issues -->
<body style="background: linear-gradient(135deg, #D4ECDD, #EAF6F6);">
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="{{ url_for('home') }}">
      <i class="fa-solid fa-seedling me-2"></i>
      <span>PrecisionGrow</span>
    </a>

    <div class="d-flex align-items-center ms-auto">
      {% if session.get('user') %}
        <div class="me-3 text-light small">Signed in as <strong>{{ session['user'] }}</strong></div>
        <a class="btn btn-outline-light btn-sm me-2" href="{{ url_for('logout') }}">Logout</a>
      {% else %}
        <a class="btn btn-outline-light btn-sm me-2" href="{{ url_for('login') }}">Login</a>
      {% endif %}
    </div>
  </div>
</nav>

<main class="container my-5">
  {% block content %}{% endblock %}
</main>

<footer>
  <div class="container">
    Â© 2025 PrecisionGrow
  </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

{% block scripts %}
<script>
/* entrance animations script (unchanged) */
(function() {
  const applyAnimations = () => {
    const hero = document.querySelector('.h1-hero');
    if (hero) { hero.classList.add('scale-in'); hero.style.animationDelay = '80ms'; }

    const lead = document.querySelector('.lead-muted');
    if (lead) { lead.classList.add('fade-in'); lead.style.animationDelay = '160ms'; }

    const cards = Array.from(document.querySelectorAll('.project-card, .card.project-card, .card')).filter(c => !c.closest('nav'));
    cards.forEach((card, i) => {
      if (!card.classList.contains('no-anim')) {
        card.classList.add('fade-in');
        card.style.animationDelay = (220 + i * 90) + 'ms';
      }
    });
    document.querySelectorAll('.icon-circle').forEach((ic, idx) => {
      ic.classList.add('fade-in');
      ic.style.animationDelay = (180 + idx * 70) + 'ms';
    });
  };
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', applyAnimations);
  else applyAnimations();
})();
</script>
{% endblock %}
</body>
</html>
